from handlers.utils import build_main_menu
from db import create_or_get_user
from telegram import Update
from telegram.ext import ContextTypes

async def start_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.effective_user.id
    create_or_get_user(user_id)
    greeting_text = """üëã –ü—Ä–∏–≤—ñ—Ç! –¶–µ –±–æ—Ç –¥–ª—è –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–æ –ù–ú–¢ –∑ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ üìê

üìå –Ø–∫ –ø—Ä–∞—Ü—é—î –±–æ—Ç:
‚Ä¢ –û–±–∏—Ä–∞—î—à —Ç–µ–º—É —ñ —Ä—ñ–≤–µ–Ω—å —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ
‚Ä¢ –û—Ç—Ä–∏–º—É—î—à –∑–∞–¥–∞—á—ñ –π –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î—à –Ω–∞ –Ω–∏—Ö
‚Ä¢ –ù–∞–∫–æ–ø–∏—á—É—î—à –±–∞–ª–∏ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

üèÜ –Ø–∫ –Ω–∞—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è –±–∞–ª–∏:
‚Ä¢ +10 –±–∞–ª—ñ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å
‚Ä¢ –ú–æ–∂–µ—à –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å–≤—ñ–π –ø—Ä–æ–≥—Ä–µ—Å —É üìä –ú—ñ–π –ø—Ä–æ–≥—Ä–µ—Å

üìö –ù–∞–≤—á–∞–ª—å–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ —Ç–∞ –ø—ñ–¥–∫–∞–∑–∫–∏:
‚Ä¢ –ë—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —Å–∫–æ—Ä–æ ‚Äî —Å—Ç–µ–∂ –∑–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º–∏!

‚ÑπÔ∏è –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:
‚Ä¢ –û–±–µ—Ä–∏ —Ç–µ–º—É üìö —ñ —Ä—ñ–≤–µ–Ω—å üéØ —É –≥–æ–ª–æ–≤–Ω–æ–º—É –º–µ–Ω—é
‚Ä¢ –û—Ç—Ä–∏–º–∞–π –∑–∞–¥–∞—á—É üß† –∞–±–æ —â–æ–¥–µ–Ω–Ω—É –∑–∞–¥–∞—á—É üîÅ
‚Ä¢ –ü–µ—Ä–µ–≤—ñ—Ä —Å–≤—ñ–π –ø—Ä–æ–≥—Ä–µ—Å —ñ –∑–∞—Ä–æ–±–ª—è–π –±–µ–π–¥–∂—ñ!

üìç –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é:"""
    await update.message.reply_text(greeting_text, reply_markup=build_main_menu(user_id))
